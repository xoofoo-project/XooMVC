var ui={};!function(t){function e(){this.callbacks={}}t.Emitter=e,e.prototype.on=function(t,e){return(this.callbacks[t]=this.callbacks[t]||[]).push(e),this},e.prototype.once=function(t,e){function i(){n.off(t,i),e.apply(this,arguments)}var n=this;return this.on(t,i),this},e.prototype.off=function(t,e){var i=this.callbacks[t];if(!i)return this;if(1==arguments.length)return delete this.callbacks[t],this;var n=i.indexOf(e);return i.splice(n,1),this},e.prototype.emit=function(t){var e=[].slice.call(arguments,1),i=this.callbacks[t];if(i)for(var n=0,o=i.length;o>n;++n)i[n].apply(this,e);return this}}(ui),function(t,e){function i(t){ui.Emitter.call(this),t=t||{},this.template=e,this.el=$(this.template),this.render(t),n&&n.hide(),i.effect&&this.effect(i.effect),n=this}var n;t.Dialog=i,t.dialog=function(t,e){switch(arguments.length){case 2:return new i({title:t,message:e});case 1:return new i({message:t})}},i.prototype=new ui.Emitter,i.prototype.render=function(t){var e=this.el,i=t.title,n=t.message,o=this;e.find(".close").click(function(){return o.emit("close"),o.hide(),!1}),e.find("h1").text(i),i||e.find("h1").remove(),"string"==typeof n?e.find("p").text(n):n&&e.find("p").replaceWith(n.el||n),setTimeout(function(){e.removeClass("hide")},0)},i.prototype.closable=function(){return this.el.addClass("closable"),this},i.prototype.effect=function(t){return this._effect=t,this.el.addClass(t),this},i.prototype.modal=function(){return this._overlay=ui.overlay(),this},i.prototype.overlay=function(){var t=this;return this._overlay=ui.overlay({closable:!0}).on("hide",function(){t.closedOverlay=!0,t.hide()}),this},i.prototype.show=function(){return this.emit("show"),this._overlay&&(this._overlay.show(),this.el.addClass("modal")),this.el.appendTo("body"),this.el.css({marginLeft:-(this.el.width()/2)+"px"}),this},i.prototype.hide=function(t){var e=this;return this.emit("hide"),t?(setTimeout(function(){e.hide()},t),this):(this.el.addClass("hide"),this._effect?setTimeout(function(t){t.remove()},500,this):e.remove(),this._overlay&&!e.closedOverlay&&this._overlay.hide(),this)},i.prototype.remove=function(){return this.el.remove(),this}}(ui,'<div id="dialog" class="hide">\n  <div class="content">\n    <h1>Title</h1>\n    <a href="#" class="close">x</a>\n    <p>Message</p>\n  </div>\n</div>'),function(t,e){function i(t){ui.Emitter.call(this);var i=this;t=t||{},this.closable=t.closable,this.el=$(e),this.el.appendTo("body"),this.closable&&this.el.click(function(){i.hide()})}t.Overlay=i,t.overlay=function(t){return new i(t)},i.prototype=new ui.Emitter,i.prototype.show=function(){return this.emit("show"),this.el.removeClass("hide"),this},i.prototype.hide=function(){var t=this;return this.emit("hide"),this.el.addClass("hide"),setTimeout(function(){t.el.remove()},2e3),this}}(ui,'<div id="overlay" class="hide"></div>'),function(t,e){function i(t){ui.Dialog.call(this,t)}t.Confirmation=i,t.confirm=function(t,e){switch(arguments.length){case 2:return new i({title:t,message:e});case 1:return new i({message:t})}},i.prototype=new ui.Dialog,i.prototype.cancel=function(t){return this.el.find(".cancel").text(t),this},i.prototype.ok=function(t){return this.el.find(".ok").text(t),this},i.prototype.show=function(t){return ui.Dialog.prototype.show.call(this),this.callback=t||function(){},this},i.prototype.render=function(t){ui.Dialog.prototype.render.call(this,t);var i=this,n=$(e);this.el.addClass("confirmation"),this.el.append(n),this.on("close",function(){i.emit("cancel"),i.callback(!1)}),n.find(".cancel").click(function(){i.emit("cancel"),i.callback(!1),i.hide()}),n.find(".ok").click(function(){i.emit("ok"),i.callback(!0),i.hide()})}}(ui,'<div class="actions">\n  <button class="cancel">Cancel</button>\n  <button class="ok main">Ok</button>\n</div>'),function(t,e){function i(t,e,i){return"rgb("+t+", "+e+", "+i+")"}function n(t,e,i,n){return"rgba("+t+", "+e+", "+i+", "+n+")"}function o(){ui.Emitter.call(this),this._colorPos={},this.el=$(e),this.main=this.el.find(".main").get(0),this.spectrum=this.el.find(".spectrum").get(0),$(this.main).bind("selectstart",function(t){t.preventDefault()}),$(this.spectrum).bind("selectstart",function(t){t.preventDefault()}),this.hue(i(255,0,0)),this.spectrumEvents(),this.mainEvents(),this.w=180,this.h=180,this.render()}t.ColorPicker=o,o.prototype=new ui.Emitter,o.prototype.size=function(t){return this.width(t).height(t)},o.prototype.width=function(t){return this.w=t,this.render(),this},o.prototype.height=function(t){return this.h=t,this.render(),this},o.prototype.spectrumEvents=function(){function t(t){var e=i.hueAt(t.offsetY-4);i.hue(e.toString()),i.emit("change",e),i._huePos=t.offsetY,i.render()}var e,i=this,n=$(this.spectrum);n.mousedown(function(i){i.preventDefault(),e=!0,t(i)}),n.mousemove(function(i){e&&t(i)}),n.mouseup(function(){e=!1})},o.prototype.mainEvents=function(){function t(t){var e=i.colorAt(t.offsetX,t.offsetY);i.color(e.toString()),i.emit("change",e),i._colorPos=t,i.render()}var e,i=this,n=$(this.main);n.mousedown(function(i){e=!0,t(i)}),n.mousemove(function(i){e&&t(i)}),n.mouseup(function(){e=!1})},o.prototype.colorAt=function(t,e){var n=this.main.getContext("2d").getImageData(t,e,1,1).data;return{r:n[0],g:n[1],b:n[2],toString:function(){return i(this.r,this.g,this.b)}}},o.prototype.hueAt=function(t){var e=this.spectrum.getContext("2d").getImageData(0,t,1,1).data;return{r:e[0],g:e[1],b:e[2],toString:function(){return i(this.r,this.g,this.b)}}},o.prototype.color=function(t){return 0==arguments.length?this._color:(this._color=t,this)},o.prototype.hue=function(t){return 0==arguments.length?this._hue:(this._hue=t,this)},o.prototype.render=function(t){t=t||{},this.renderMain(t),this.renderSpectrum(t)},o.prototype.renderSpectrum=function(t){var e=(this.el,this.spectrum),o=e.getContext("2d"),s=this._huePos,r=.12*this.w,h=this.h;e.width=r,e.height=h;var c=o.createLinearGradient(0,0,0,h);c.addColorStop(0,i(255,0,0)),c.addColorStop(.15,i(255,0,255)),c.addColorStop(.33,i(0,0,255)),c.addColorStop(.49,i(0,255,255)),c.addColorStop(.67,i(0,255,0)),c.addColorStop(.84,i(255,255,0)),c.addColorStop(1,i(255,0,0)),o.fillStyle=c,o.fillRect(0,0,r,h),s&&(o.fillStyle=n(0,0,0,.3),o.fillRect(0,s,r,1),o.fillStyle=n(255,255,255,.3),o.fillRect(0,s+1,r,1))},o.prototype.renderMain=function(t){var e=(this.el,this.main),o=e.getContext("2d"),s=this.w,r=this.h,h=(this._colorPos.offsetX||s)+.5,c=(this._colorPos.offsetY||0)+.5;e.width=s,e.height=r;var a=o.createLinearGradient(0,0,s,0);a.addColorStop(0,i(255,255,255)),a.addColorStop(1,this._hue),o.fillStyle=a,o.fillRect(0,0,s,r),a=o.createLinearGradient(0,0,0,r),a.addColorStop(0,n(255,255,255,0)),a.addColorStop(1,n(0,0,0,1)),o.fillStyle=a,o.fillRect(0,0,s,r);var l=10;o.save(),o.beginPath(),o.lineWidth=1,o.strokeStyle=n(0,0,0,.5),o.arc(h,c,l/2,0,2*Math.PI,!1),o.stroke(),o.strokeStyle=n(255,255,255,.5),o.arc(h,c,l/2-1,0,2*Math.PI,!1),o.stroke(),o.beginPath(),o.restore()}}(ui,'<div class="color-picker">\n  <canvas class="main"></canvas>\n  <canvas class="spectrum"></canvas>\n</div>'),function(t,e){function i(e){return function(i,n){return t.notify.apply(this,arguments).type(e)}}function n(t){ui.Emitter.call(this),t=t||{},this.template=e,this.el=$(this.template),this.render(t),n.effect&&this.effect(n.effect)}var o;t.Notification=n,$(function(){o=$('<ul id="notifications">'),o.appendTo("body")}),t.notify=function(t,e){switch(arguments.length){case 2:return new n({title:t,message:e}).show().hide(4e3);case 1:return new n({message:t}).show().hide(4e3)}},t.info=t.notify,t.warn=i("warn"),t.error=i("error"),n.prototype=new ui.Emitter,n.prototype.render=function(t){var e=this.el,i=t.title,n=t.message,o=this;e.find(".close").click(function(){return o.hide(),!1}),e.click(function(t){t.preventDefault(),o.emit("click",t)}),e.find("h1").text(i),i||e.find("h1").remove(),"string"==typeof n?e.find("p").text(n):n&&e.find("p").replaceWith(n.el||n),setTimeout(function(){e.removeClass("hide")},0)},n.prototype.closable=function(){return this.el.addClass("closable"),this},n.prototype.effect=function(t){return this._effect=t,this.el.addClass(t),this},n.prototype.show=function(){return this.el.appendTo(o),this},n.prototype.type=function(t){return this._type=t,this.el.addClass(t),this},n.prototype.sticky=function(){return this.hide(0).closable()},n.prototype.hide=function(t){var e=this;return"number"==typeof t?(clearTimeout(this.timer),t?(this.timer=setTimeout(function(){e.hide()},t),this):this):(this.el.addClass("hide"),this._effect?setTimeout(function(t){t.remove()},500,this):e.remove(),this)},n.prototype.remove=function(){return this.el.remove(),this}}(ui,'<li class="notification hide">\n  <div class="content">\n    <h1>Title</h1>\n    <a href="#" class="close">x</a>\n    <p>Message</p>\n  </div>\n</li>'),function(t,e){function i(t){ui.Emitter.call(this),this.el=$(e),this.events(),this.render({label:t}),this.state="hidden"}t.SplitButton=i,i.prototype=new ui.Emitter,i.prototype.events=function(){var t=this,e=this.el;e.find(".button").click(function(e){e.preventDefault(),t.emit("click",e)}),e.find(".toggle").click(function(e){e.preventDefault(),t.toggle()})},i.prototype.toggle=function(){return"hidden"==this.state?this.show():this.hide()},i.prototype.show=function(){return this.state="visible",this.emit("show"),this},i.prototype.hide=function(){return this.state="hidden",this.emit("hide"),this},i.prototype.render=function(t){var t=t||{},e=this.el.find(".button"),i=t.label;return"string"==i?e.text(i):e.text("").append(i),this}}(ui,'<div class="split-button">\n  <a class="button" href="#">Action</a>\n  <a class="toggle" href="#"><span></span></a>\n</div>'),function(t,e){function i(){var t=this;ui.Emitter.call(this),this.items={},this.el=$(e).hide().appendTo("body"),$("html").click(function(){t.hide()})}function n(t){return t.toLowerCase().replace(/ +/g,"-").replace(/[^a-z0-9-]/g,"")}t.Menu=i,t.menu=function(){return new i},i.prototype=new ui.Emitter,i.prototype.add=function(t,e){var i=this,o=$('<li><a href="#">'+t+"</a></li>").addClass(n(t)).appendTo(this.el).click(function(n){n.preventDefault(),n.stopPropagation(),i.hide(),i.emit(t),e&&e()});return this.items[t]=o,this},i.prototype.remove=function(t){var e=this.items[t];if(!e)throw new Error('no menu item named "'+t+'"');return this.emit("remove",t),e.remove(),delete this.items[t],this},i.prototype.has=function(t){return!!this.items[t]},i.prototype.moveTo=function(t,e){return this.el.css({top:e,left:t}),this},i.prototype.show=function(){return this.emit("show"),this.el.show(),this},i.prototype.hide=function(){return this.emit("hide"),this.el.hide(),this}}(ui,'<div class="menu">\n</div>'),function(t,e){function i(t,i){ui.Emitter.call(this),this._front=t||$("<p>front</p>"),this._back=i||$("<p>back</p>"),this.template=e,this.render()}t.Card=i,t.card=function(t,e){return new i(t,e)},i.prototype=new ui.Emitter,i.prototype.front=function(t){return this._front=t,this.render(),this},i.prototype.back=function(t){return this._back=t,this.render(),this},i.prototype.flip=function(){return this.emit("flip"),this.el.toggleClass("flipped"),this},i.prototype.effect=function(t){return this.el.addClass(t),this},i.prototype.render=function(t){var e=this,i=this.el=$(this.template);i.find(".front").empty().append(this._front.el||$(this._front)),i.find(".back").empty().append(this._back.el||$(this._back)),i.click(function(){e.flip()})}}(ui,'<div class="card">\n  <div class="wrapper">\n    <div class="face front">1</div>\n    <div class="face back">2</div>\n  </div>\n</div>');