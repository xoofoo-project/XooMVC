!function(e){function i(i,t){this.timeline=e(i),this.settings=e.extend({},e.fn.dpSocialTimeline.defaults,t);var s=this.settings.feeds,a=this.settings.custom;this.feeds=new Array,this.custom=new Array,this.social=new Array;var n;this.is_iOS=!1,n=navigator.platform,("iPad"===n||"iPhone"===n||"iPod"===n)&&(this.is_iOS=!0),this.timeline_id="";for(x in this.settings.feeds){if(this.feeds[x+"_arr"]=s[x].data.split(","),"undefined"!=typeof s[x].limit)try{this.feeds[x+"_limit"]=isNaN(s[x].limit)?s[x].limit.split(","):s[x].limit}catch(l){}"undefined"==typeof this.feeds[x+"_limit"]&&(this.feeds[x+"_limit"]=0),this.feeds[x+"_url"]=new Array,this.timeline_id+=this.feeds[x+"_arr"]}for(x in this.settings.custom)this.custom[x+"_url"]=new Array(a[x].url),this.custom[x+"_name"]=new Array(a[x].name),this.custom[x+"_icon"]=new Array(a[x].icon),this.custom[x+"_limit"]=a[x].limit,this.social.push({name:this.custom[x+"_name"],url:this.custom[x+"_url"],id:x,icon:this.custom[x+"_icon"],limit:this.custom[x+"_limit"]}),this.timeline_id+=this.custom[x+"_url"];this.totalFeeds=0,this.resizeTimer,this.nameFeeds=new Array,this.iconFeeds=new Array,this.limitFeeds=new Array,this.entry=new Array,this.settings.itemWidthOrig=this.settings.itemWidth;var o=new String(window.document.location);switch(this.prefix=-1!=o.indexOf("https://")?"https://":"http://",this.settings.layoutMode){case"timeline":"undefined"==typeof e.Isotope?(this.settings.layoutMode="masonry",""!=this.settings.columnsItemWidth&&(this.settings.itemWidth=this.settings.columnsItemWidth)):(this.settings.layoutMode="spineAlign",""!=this.settings.timelineItemWidth&&(this.settings.itemWidth=this.settings.timelineItemWidth));break;case"columns":this.settings.layoutMode="masonry",""!=this.settings.columnsItemWidth&&(this.settings.itemWidth=this.settings.columnsItemWidth);break;case"one_column":this.settings.layoutMode="undefined"==typeof e.Isotope?"vertical":"straightDown",""!=this.settings.oneColumnItemWidth&&(this.settings.itemWidth=this.settings.oneColumnItemWidth)}this.lastLayout=this.settings.layoutMode,this.timeline.addClass(this.settings.skin),this.init()}i.prototype={init:function(){var i=this;if(this.feeds.twitter_arr){for(var t=0;t<this.feeds.twitter_arr.length;t++)this.feeds.twitter_url[t]=e.trim(this.feeds.twitter_arr[t])+"&t="+(new Date).getTime();this.social.push({name:this.feeds.twitter_arr,url:this.feeds.twitter_url,id:"twitter",icon:"",limit:this.feeds.twitter_limit})}if(this.feeds.twitter_hash_arr){for(var t=0;t<this.feeds.twitter_hash_arr.length;t++){var s=this.feeds.twitter_hash_arr[t].substr(this.feeds.twitter_hash_arr[t].lastIndexOf("=")+1),a=encodeURIComponent(s);this.feeds.twitter_hash_url[t]=e.trim(this.feeds.twitter_hash_arr[t].replace(s,a))+"&t="+(new Date).getTime()}this.social.push({name:this.feeds.twitter_hash_arr,url:this.feeds.twitter_hash_url,id:"twitter",icon:"",limit:this.feeds.twitter_hash_limit})}if(this.feeds.lastfm_tracks_arr){for(var t=0;t<this.feeds.lastfm_tracks_arr.length;t++)this.feeds.lastfm_tracks_url[t]="http://ws.audioscrobbler.com/1.0/user/"+e.trim(this.feeds.lastfm_tracks_arr[t])+"/recenttracks.rss";this.social.push({name:this.feeds.lastfm_tracks_arr,url:this.feeds.lastfm_tracks_url,id:"lastfm",icon:"",limit:this.feeds.lastfm_tracks_limit})}if(this.feeds.lastfm_events_arr){for(var t=0;t<this.feeds.lastfm_events_arr.length;t++)this.feeds.lastfm_events_url[t]="http://ws.audioscrobbler.com/1.0/user/"+e.trim(this.feeds.lastfm_events_arr[t])+"/events.rss";this.social.push({name:this.feeds.lastfm_events_arr,url:this.feeds.lastfm_events_url,id:"lastfm",icon:"",limit:this.feeds.lastfm_events_limit})}if(this.feeds.lastfm_loved_arr){for(var t=0;t<this.feeds.lastfm_loved_arr.length;t++)this.feeds.lastfm_loved_url[t]="http://ws.audioscrobbler.com/2.0/user/"+e.trim(this.feeds.lastfm_loved_arr[t])+"/lovedtracks.rss";this.social.push({name:this.feeds.lastfm_loved_arr,url:this.feeds.lastfm_loved_url,id:"lastfm",icon:"",limit:this.feeds.lastfm_loved_limit})}if(this.feeds.lastfm_artist_events_arr){for(var t=0;t<this.feeds.lastfm_artist_events_arr.length;t++)this.feeds.lastfm_artist_events_url[t]="http://ws.audioscrobbler.com/1.0/artist/"+e.trim(this.feeds.lastfm_artist_events_arr[t])+"/events.rss";this.social.push({name:this.feeds.lastfm_artist_events_arr,url:this.feeds.lastfm_artist_events_url,id:"lastfm",icon:"",limit:this.feeds.lastfm_artist_events_limit})}if(this.feeds.lastfm_journal_arr){for(var t=0;t<this.feeds.lastfm_journal_arr.length;t++)this.feeds.lastfm_journal_url[t]="http://ws.audioscrobbler.com/1.0/user/"+e.trim(this.feeds.lastfm_journal_arr[t])+"/journals.rss";this.social.push({name:this.feeds.lastfm_journal_arr,url:this.feeds.lastfm_journal_url,id:"lastfm",icon:"",limit:this.feeds.lastfm_journal_limit})}if(this.feeds.google_arr){for(var t=0;t<this.feeds.google_arr.length;t++)this.feeds.google_url[t]=e.trim(this.feeds.google_arr[t]);this.social.push({name:this.feeds.google_arr,url:this.feeds.google_url,id:"google",icon:"",limit:this.feeds.google_limit})}if(this.feeds.instagram_arr){for(var t=0;t<this.feeds.instagram_arr.length;t++)this.feeds.instagram_url[t]=e.trim(this.feeds.instagram_arr[t])+"&t="+(new Date).getTime();this.social.push({name:this.feeds.instagram_arr,url:this.feeds.instagram_url,id:"instagram",icon:"",limit:this.feeds.instagram_limit})}if(this.feeds.instagram_hash_arr){for(var t=0;t<this.feeds.instagram_hash_arr.length;t++){var s=this.feeds.instagram_hash_arr[t].substr(this.feeds.instagram_hash_arr[t].lastIndexOf("=")+1),a=encodeURIComponent(s);this.feeds.instagram_hash_url[t]=e.trim(this.feeds.instagram_hash_arr[t].replace(s,a))+"&t="+(new Date).getTime()}this.social.push({name:this.feeds.instagram_hash_arr,url:this.feeds.instagram_hash_url,id:"instagram",icon:"",limit:this.feeds.instagram_hash_limit})}if(this.feeds.soundcloud_arr){for(var t=0;t<this.feeds.soundcloud_arr.length;t++)this.feeds.soundcloud_url[t]="http://picklemonkey.net/cloudflipper/cloudflipper.php?feed=https://soundcloud.com/"+e.trim(this.feeds.soundcloud_arr[t]);this.social.push({name:this.feeds.soundcloud_arr,url:this.feeds.soundcloud_url,id:"soundcloud",icon:"https://a-v2.sndcdn.com/assets/images/sc-icons/favicon-154f6af5.ico",limit:this.feeds.soundcloud_limit})}if(this.feeds.facebook_page_arr){for(var t=0;t<this.feeds.facebook_page_arr.length;t++)this.feeds.facebook_page_url[t]=e.trim(this.feeds.facebook_page_arr[t])+"&t="+(new Date).getTime();this.social.push({name:this.feeds.facebook_page_arr,url:this.feeds.facebook_page_url,id:"facebook",icon:"",limit:this.feeds.facebook_page_limit})}if(this.feeds.delicious_arr){for(var t=0;t<this.feeds.delicious_arr.length;t++)this.feeds.delicious_url[t]="http://feeds.delicious.com/v2/rss/"+e.trim(this.feeds.delicious_arr[t]);this.social.push({name:this.feeds.delicious_arr,url:this.feeds.delicious_url,id:"delicious",icon:"",limit:this.feeds.delicious_limit})}if(this.feeds.flickr_arr){for(var t=0;t<this.feeds.flickr_arr.length;t++)this.feeds.flickr_url[t]="http://api.flickr.com/services/feeds/photos_public.gne?id="+e.trim(this.feeds.flickr_arr[t])+"&format=rss_200";this.social.push({name:this.feeds.flickr_arr,url:this.feeds.flickr_url,id:"flickr",icon:"",limit:this.feeds.flickr_limit})}if(this.feeds.flickr_hash_arr){for(var t=0;t<this.feeds.flickr_hash_arr.length;t++)this.feeds.flickr_hash_url[t]="http://api.flickr.com/services/feeds/photos_public.gne?tags="+e.trim(this.feeds.flickr_hash_arr[t])+"&lang=es-us&format=rss_200";this.social.push({name:this.feeds.flickr_hash_arr,url:this.feeds.flickr_hash_url,id:"flickr",icon:"",limit:this.feeds.flickr_hash_limit})}if(this.feeds.tumblr_arr){for(var t=0;t<this.feeds.tumblr_arr.length;t++)this.feeds.tumblr_url[t]="http://"+e.trim(this.feeds.tumblr_arr[t])+".tumblr.com/rss";this.social.push({name:this.feeds.tumblr_arr,url:this.feeds.tumblr_url,id:"tumblr",icon:"",limit:this.feeds.tumblr_limit})}if(this.feeds.youtube_arr){for(var t=0;t<this.feeds.youtube_arr.length;t++)this.feeds.youtube_url[t]=e.trim(this.feeds.youtube_arr[t])+"&t="+(new Date).getTime();this.social.push({name:this.feeds.youtube_arr,url:this.feeds.youtube_url,id:"youtube",icon:"",limit:this.feeds.youtube_limit})}if(this.feeds.youtube_search_arr){for(var t=0;t<this.feeds.youtube_search_arr.length;t++)this.feeds.youtube_search_url[t]=e.trim(this.feeds.youtube_search_arr[t])+"&t="+(new Date).getTime();this.social.push({name:this.feeds.youtube_search_arr,url:this.feeds.youtube_search_url,id:"youtube",icon:"",limit:this.feeds.youtube_search_limit})}if(this.feeds.dribbble_arr){for(var t=0;t<this.feeds.dribbble_arr.length;t++)this.feeds.dribbble_url[t]="http://dribbble.com/players/"+e.trim(this.feeds.dribbble_arr[t])+"/shots.rss";this.social.push({name:this.feeds.dribbble_arr,url:this.feeds.dribbble_url,id:"dribbble",icon:"",limit:this.feeds.dribbble_limit})}if(this.feeds.digg_arr){for(var t=0;t<this.feeds.digg_arr.length;t++)this.feeds.digg_url[t]="http://digg.com/users/"+e.trim(this.feeds.digg_arr[t])+"/history.rss";this.social.push({name:this.feeds.digg_arr,url:this.feeds.digg_url,id:"digg",icon:"",limit:this.feeds.digg_limit})}if(this.feeds.pinterest_arr){for(var t=0;t<this.feeds.pinterest_arr.length;t++)this.feeds.pinterest_url[t]="http://www.pinterest.com/"+e.trim(this.feeds.pinterest_arr[t])+"/feed.rss";this.social.push({name:this.feeds.pinterest_arr,url:this.feeds.pinterest_url,id:"pinterest",icon:"",limit:this.feeds.pinterest_limit})}if(this.feeds.vimeo_arr){for(var t=0;t<this.feeds.vimeo_arr.length;t++)this.feeds.vimeo_url[t]="http://vimeo.com/"+e.trim(this.feeds.vimeo_arr[t])+"/videos/rss";this.social.push({name:this.feeds.vimeo_arr,url:this.feeds.vimeo_url,id:"vimeo",icon:"",limit:this.feeds.vimeo_limit})}this.timeline.addClass("dpSocialTimelineLoading"),this._parseFeeds(),e(window).bind("resize",function(){(e(window).height()!=i.lastWindowHeight||e(window).width()!=i.lastWindowWidth)&&(i.lastWindowHeight=e(window).height(),i.lastWindowWidth=e(window).width(),i._updateTimelineSize())});var n="http://platform.twitter.com/widgets.js";e.getScript(n)},_supports_html5_storage:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}},_createCookie:function(e,i){this._supports_html5_storage()&&(localStorage[e]=i)},_deleteCookie:function(e){this._supports_html5_storage()&&(localStorage[e]=null)},_getCookie:function(e){return this._supports_html5_storage()?localStorage[e]:null},_updateTimelineSize:function(){this.timeline.width()<480?(e("button",this.timeline).removeClass("active"),e(".dpSocialTimeline_layout",this.timeline).hide(),this.settings.showFilter&&1!=this.totalFeeds||e(".dpSocialTimeline_divider",this.timeline).hide(),e(".dpSocialTimeline_lineWrap",this.timeline).fadeOut("fast"),e(".dpSocialTimeline_item",this.timeline).css("width","99%"),e(".dpSocialTimeline",this.timeline).isotope({layoutMode:"undefined"==typeof e.Isotope?"vertical":"straightDown"}),e(".dpSocialTimeline_item.filtered",this.timeline).length?(e(".dpSocialTimeline_item.filtered:gt("+(this.settings.total-1)+")",this.timeline).css({opacity:0,scale:.001,display:"none"}),e(".dpSocialTimeline_item.filtered:lt("+this.settings.total+")",this.timeline).css({opacity:1,scale:1,display:"block"})):e(".dpSocialTimeline_item:gt("+(this.settings.total-1)+")",this.timeline).css({opacity:0,scale:.001,display:"none"})):e("button."+this.lastLayout,this.timeline).hasClass("active")&&this.lastLayout!=("undefined"==typeof e.Isotope?"vertical":"straightDown")||(this.settings.showLayout&&e(".dpSocialTimeline_layout",this.timeline).show(),e("button."+this.lastLayout,this.timeline).trigger("click"))},_addSocial:function(i,t){var s=this;""!=this.social[i].name?this._parseRSS(this.social[i].url[t],this.social[i].limit,t,function(a,n){function l(){s.social[i].url.length>=t+1&&s._addSocial(i,t+1),n==s.social[i].url.length-1&&(parseInt(i,10)==s.social.length-1?(s.settings.cache&&(s._createCookie("dpSocialTimeline_"+s.timeline_id,JSON.stringify(s.entry),1),s._createCookie("dpSocialTimeline_NameFeeds_"+s.timeline_id,JSON.stringify(s.nameFeeds),1),s._createCookie("dpSocialTimeline_IconFeeds_"+s.timeline_id,JSON.stringify(s.iconFeeds),1),s._createCookie("dpSocialTimeline_LimitFeeds_"+s.timeline_id,JSON.stringify(s.limitFeeds),1),s._createCookie("dpSocialTimeline_TotalFeeds_"+s.timeline_id,JSON.stringify(s.totalFeeds),1),s._createCookie("dpSocialTimeline_Time"+s.timeline_id,Math.round(e.now()/1e3),1)),s._output()):s._addSocial(i+1,0))}var o=a.xmlString,a=a.feed;if(!a)return l(),!1;s.nameFeeds[s.totalFeeds]=s.social[i].id,s.iconFeeds[s.totalFeeds]=s.social[i].icon,s.limitFeeds[s.totalFeeds]=s.social[i].limit,s.totalFeeds++;for(var r=0;r<a.entries.length;r++){if(a.entries[r].name=s.social[i].id,a.entries[r].icon=s.social[i].icon,a.entries[r].limit=s.social[i].limit,a.entries[r].search_item=s.social[i].name[n],"undefined"!=typeof o){var d=e.parseXML(o),h=e(d),m=h.find("enclosure")[r],c=h.find("description")[r+1],p=h.find("guid")[r],u=h.find("credit")[r],f=h.find("thumbnail")[r];m&&(a.entries[r].enclosure=e(m).attr("url"),a.entries[r].enclosure_type=e(m).attr("type")),p&&(a.entries[r].guid=e(p).text()),u&&"instagram"==s.social[i].id&&(a.entries[r].author=e(u).text()),c&&"tumblr"==a.entries[r].name&&(a.entries[r].content=e(c).text()),f&&"vimeo"==a.entries[r].name&&(a.entries[r].thumbnail=e(f).attr("url"))}a.entries[r].feed_title=a.title,(""==a.entries[r].author||"Webstagram"==a.entries[r].author)&&(a.entries[r].author=s.social[i].name[n]);try{(""!=a.entries[r].title||""!=a.entries[r].contentSnippet||""!=a.entries[r].content)&&s.entry.push(a.entries[r])}catch(_){}}l()},this.settings.total):parseInt(i,10)==this.social.length-1?(this.settings.cache&&(this._createCookie("dpSocialTimeline_"+this.timeline_id,JSON.stringify(this.entry),1),this._createCookie("dpSocialTimeline_NameFeeds_"+this.timeline_id,JSON.stringify(this.nameFeeds),1),this._createCookie("dpSocialTimeline_IconFeeds_"+this.timeline_id,JSON.stringify(this.iconFeeds),1),this._createCookie("dpSocialTimeline_LimitFeeds_"+this.timeline_id,JSON.stringify(this.limitFeeds),1),this._createCookie("dpSocialTimeline_TotalFeeds_"+this.timeline_id,JSON.stringify(this.totalFeeds),1),this._createCookie("dpSocialTimeline_Time"+this.timeline_id,Math.round(e.now()/1e3),1)),this._output()):this._addSocial(i+1,0)},_parseFeeds:function(){if(!this.is_iOS&&this.settings.cache&&this._getCookie("dpSocialTimeline_"+this.timeline_id)&&""!=this._getCookie("dpSocialTimeline_"+this.timeline_id)&&"null"!=this._getCookie("dpSocialTimeline_"+this.timeline_id)){this.entry=e.parseJSON(this._getCookie("dpSocialTimeline_"+this.timeline_id)),this.nameFeeds=e.parseJSON(this._getCookie("dpSocialTimeline_NameFeeds_"+this.timeline_id)),this.iconFeeds=e.parseJSON(this._getCookie("dpSocialTimeline_IconFeeds_"+this.timeline_id)),this.limitFeeds=e.parseJSON(this._getCookie("dpSocialTimeline_LimitFeeds_"+this.timeline_id)),this.totalFeeds=e.parseJSON(this._getCookie("dpSocialTimeline_TotalFeeds_"+this.timeline_id));{new Date}this.settings.cacheTime<=Math.round(e.now()/1e3)-this._getCookie("dpSocialTimeline_Time"+this.timeline_id)&&(this._deleteCookie("dpSocialTimeline_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_NameFeeds_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_IconFeeds_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_LimitFeeds_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_TotalFeeds_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_Time"+this.timeline_id)),this._output()}else this.settings.cache||this.is_iOS||(this._deleteCookie("dpSocialTimeline_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_NameFeeds_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_IconFeeds_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_LimitFeeds_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_TotalFeeds_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_Time"+this.timeline_id)),this._addSocial(0,0)},_strip_tags:function(e,i){if(!e)return"";i=(((i||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var t=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,s=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return e.replace(s,"").replace(t,function(e,t){return i.indexOf("<"+t.toLowerCase()+">")>-1?e:""})},_output:function(){var i=this,t={$dpSocialTimelineLine:"",$dpSocialTimelineFilter:"",$dpSocialTimelineLayout:"",$dpSocialTimelineLineWrap:"",$dpSocialTimelineContent:"",$div:"",showDivider:!1,appendFilter:!1,appendLayout:!1},s=new Array;if(t.$div=e("<div>").addClass("dpSocialTimeline"),t.$dpSocialTimelineLine=e("<div />").addClass("dpSocialTimeline_line"),t.$dpSocialTimelineLineWrap=e("<div />").addClass("dpSocialTimeline_lineWrap").append(e(t.$dpSocialTimelineLine)),e(t.$div).append(t.$dpSocialTimelineLineWrap),this.entry.sort(function(e,i){return e=new Date(e.publishedDate).getTime(),i=new Date(i.publishedDate).getTime(),e==i?0:e>i?-1:1}),this._createMarkup(t,0,!1),e(".dpSocialTimeline_item",t.$div).width(this.settings.itemWidth),this.settings.showFilter&&this.totalFeeds>1){t.$dpSocialTimelineFilter=e("<div />").addClass("dpSocialTimeline_filter");for(var a=0;a<=this.totalFeeds;a++)"undefined"!=typeof this.nameFeeds[a]&&-1===e.inArray(this.nameFeeds[a],s)&&(t.$dpSocialTimelineFilter.append(e("<button />").attr({"data-filter":"."+this.nameFeeds[a]}).append(e("<span />").addClass("favicon "+this.nameFeeds[a]))),"undefined"!=typeof this.iconFeeds[a]&&""!=this.iconFeeds[a]&&e("."+this.nameFeeds[a],t.$dpSocialTimelineFilter).css("background-image","url("+this.iconFeeds[a]+")"),s[a]=this.nameFeeds[a]);s.length>1&&(t.appendFilter=!0,t.showDivider=!0)}t.$dpSocialTimelineLayout=e("<div />").addClass("dpSocialTimeline_layout"),this.settings.showLayoutTimeline&&"undefined"!=typeof e.Isotope&&t.$dpSocialTimelineLayout.append(e("<button />").attr({"data-style":"spineAlign"}).addClass("spineAlign").append(e("<span />"))),this.settings.showLayoutColumns&&t.$dpSocialTimelineLayout.append(e("<button />").attr({"data-style":"masonry"}).addClass("masonry").append(e("<span />"))),this.settings.showLayoutOneColumn&&t.$dpSocialTimelineLayout.append(e("<button />").attr({"data-style":"undefined"==typeof e.Isotope?"vertical":"straightDown"}).addClass("straightDown").append(e("<span />"))),t.appendLayout=!0,this.settings.showLayout?t.showDivider=!0:t.$dpSocialTimelineLayout.hide(),i._onLoadHook(t),t.$dpSocialTimelineFilter.length&&e("button",t.$dpSocialTimelineFilter).click(function(){i.settings.allowMultipleFilters||e("button",t.$dpSocialTimelineFilter).not(this).removeClass("active"),e(this).hasClass("active")?e(this).removeClass("active"):e(this).addClass("active");var s="";return e(".dpSocialTimeline_item.filtered",t.$div).removeClass("filtered"),e("button.active",t.$dpSocialTimelineFilter).each(function(i){""!=e(this).attr("data-filter")&&"undefined"!=typeof e(this).attr("data-filter")&&(i>0&&(s+=","),s+=e(this).attr("data-filter"),e(".dpSocialTimeline_item"+e(this).attr("data-filter"),t.$div).addClass("filtered"))}),""==s?(s=".dpSocialTimeline_item:lt("+i.settings.total+")",t.$div.isotope({filter:s}),e(".dpSocialTimeline_item:gt("+(i.settings.total-1)+")",t.$div).css({opacity:0,scale:.001,display:"block"})):(s=".filtered:lt("+i.settings.total+")",t.$div.isotope({filter:s}),e(".dpSocialTimeline_item.filtered:gt("+(i.settings.total-1)+")",t.$div).css({opacity:0,scale:.001,display:"none"}),e(".dpSocialTimeline_item.filtered:lt("+i.settings.total+")",t.$div).css({opacity:1,scale:1,display:"block"})),!1}),e("button",t.$dpSocialTimelineLayout).click(function(){if(!e(this).hasClass("active")){if(e("button",t.$dpSocialTimelineLayout).removeClass("active"),e(this).addClass("active"),""!=e(this).attr("data-style")&&"undefined"!=typeof e(this).attr("data-style")){switch(i.lastLayout=e(this).attr("data-style"),i.lastLayout){case"spineAlign":t.$dpSocialTimelineLineWrap.fadeIn("fast"),""!=i.settings.timelineItemWidth?e(".dpSocialTimeline_item",t.$div).css("width",i.settings.timelineItemWidth):e(".dpSocialTimeline_item",t.$div).width(i.settings.itemWidthOrig);break;case"masonry":t.$dpSocialTimelineLineWrap.fadeOut("fast"),""!=i.settings.columnsItemWidth?e(".dpSocialTimeline_item",t.$div).css("width",i.settings.columnsItemWidth):e(".dpSocialTimeline_item",t.$div).width(i.settings.itemWidthOrig);break;case"straightDown":case"vertical":t.$dpSocialTimelineLineWrap.fadeOut("fast"),""!=i.settings.oneColumnItemWidth?e(".dpSocialTimeline_item",t.$div).css("width",i.settings.oneColumnItemWidth):e(".dpSocialTimeline_item",t.$div).width(i.settings.itemWidthOrig)}t.$div.isotope({layoutMode:e(this).attr("data-style")}),e(".dpSocialTimeline_item.filtered",t.$div).length?(e(".dpSocialTimeline_item.filtered:gt("+(i.settings.total-1)+")",t.$div).css({opacity:0,scale:.001,display:"none"}),e(".dpSocialTimeline_item.filtered:lt("+i.settings.total+")",t.$div).css({opacity:1,scale:1,display:"block"})):e(".dpSocialTimeline_item:gt("+(i.settings.total-1)+")",t.$div).css({opacity:0,scale:.001,display:"none"})}return!1}})},_createMarkup:function(i,t,s){var a=this;for(x=t;x<this.entry.length;x++){this.settings.showSocialIcons?($favicon=e("<span />").addClass("favicon "+this.entry[x].name),"undefined"!=typeof this.entry[x].icon&&""!=this.entry[x].icon&&e($favicon).css("background-image","url("+this.entry[x].icon+")")):$favicon="",date_published=new Date(this.entry[x].publishedDate),published_parse=Date.UTC(date_published.getFullYear(),date_published.getMonth(),date_published.getDate(),date_published.getHours(),date_published.getMinutes()),$time=e("<span />").addClass("time").html(this._relativeTime(published_parse)),$permalink=e("<a />").addClass("permalink").attr({href:this.entry[x].link,target:"_blank"}),("undefined"==typeof this.entry[x].link||null==this.entry[x].link)&&(this.entry[x].link=""),-1!==this.entry[x].link.indexOf("youtube.com/watch")?(is_youtube=!0,this.entry[x].thumbnail="http://i.ytimg.com/vi/"+this._getYoutubeId(this.entry[x].link)+"/0.jpg",is_vimeo=!1,$video_icon=e("<div />").addClass("video_icon")):"http://vimeo.com"==this.entry[x].link.substr(0,16)?(is_youtube=!1,is_vimeo=!0,$video_icon=e("<div />").addClass("video_icon")):(is_youtube=!1,is_vimeo=!1,$video_icon="");var n=this.entry[x].author,l=this.entry[x].feed_title,o=(this.entry[x].enclosure,this.entry[x].guid);"flickr"==this.entry[x].name?n=this.entry[x].author.match(/\((.*?)\)/g)[0]:"undefined"!=typeof n&&null!=n&&(n=n.replace(/\((.*?)\)/g,"")),"twitter"==this.entry[x].name&&(n="@"+n),"google"==this.entry[x].name&&(n=l.substr(0,l.indexOf(".")).replace("Public RSS-Feed of ","")),"soundcloud"==this.entry[x].name&&(n=l),i.$dpSocialTimelineContent=e("<div />").addClass("dpSocialTimelineContent");var r="";if(-1!==this.entry[x].link.indexOf("twitter.com")){var d=this.entry[x].link.split("/"),h=d[5];r=this._linkify(this.entry[x].title.replace(new RegExp("("+this.preg_quote(n.replace("@","")+": ")+")","gi"),"")),e(i.$dpSocialTimelineContent).append(e("<div>").addClass("dpSocialTimelineTwitterActions").append(e("<a>").attr({href:"https://twitter.com/intent/tweet?in_reply_to="+h}).addClass("tw_reply").text("Reply")).append(e("<a>").attr({href:"https://twitter.com/intent/retweet?tweet_id="+h}).addClass("tw_retweet").text("Retweet")).append(e("<a>").attr({href:"https://twitter.com/intent/favorite?tweet_id="+h}).addClass("tw_favorite").text("Favorite")))}else if(-1!==this.entry[x].link.indexOf("facebook.com")||-1!==this.entry[x].link.indexOf("pinterest.com")){if(this.entry[x].content=null!=this.entry[x].content?this.entry[x].content.replace('rel="nofollow">www','rel="nofollow">http://www'):"&nbsp;",-1!==this.entry[x].link.indexOf("media/set/"))continue;r=this._linkify(this._strip_tags(this.entry[x].content,"<br>, <p>, <video>, <source>")).replace("<br><br>",""),0==r.indexOf("<br>")&&(r=r.substr(4)),""==r&&(r=this._linkify(this.entry[x].title)),"undefined"==typeof r&&(r="&nbsp;"),r=r.replace('.jpg" target="_blank"','.jpg" style="display:none;"'),r=r.replace(/nolinkVideo/g,"https://")}else r=this._linkify(this.entry[x].title);"tumblr"==this.entry[x].name&&(-1!=this.entry[x].content.indexOf("<iframe")&&(r=this.entry[x].content),r=r.replace("Photo:","").replace("Photo","")),"modern"!=this.settings.skin&&e(i.$dpSocialTimelineContent).prepend(e("<div>").addClass("dpSocialTimelineText").html(r));var m=this._getImage(this.entry[x],!1);if(""!=m?($get_image=m,$img_link=e("<a />").attr({href:this.entry[x].link,target:"_blank"}).addClass("img_link"+(is_youtube||is_vimeo?" youtube":"")),e($img_link).append($get_image).append($video_icon),(this.settings.addColorbox||this.settings.addLightbox)&&"google"!=this.entry[x].name&&(e($img_link).addClass("addColorbox"),e($img_link).attr(is_youtube?{href:this.entry[x].link.replace("&feature=youtube_gdata","")}:{href:this._getImage(this.entry[x],!0)})),i.$dpSocialTimelineContent.prepend($img_link),-1!==$get_image.attr("src").indexOf("graph.facebook.com")&&e.getJSON($get_image.attr("src")+"&redirect=false",function(i){$get_image.attr("src");i.data.is_silhouette&&e("img[src='"+this.url.replace("&redirect=false","")+"']").hide()})):e(i.$dpSocialTimelineContent).addClass("dpSocialTimeline_noImage"),"soundcloud"==this.entry[x].name){var c=o.substr(o.lastIndexOf("/")+1);i.$dpSocialTimelineContent.addClass("track-"+c),e.getJSON("https://soundcloud.com/oembed?callback=?",{format:"js",url:o,iframe:!0,guid:".track-"+o.substr(o.lastIndexOf("/")+1)},function(t){var s=this.url.substr(this.url.lastIndexOf(".track")).split("&");"modern"==a.settings.skin?e(e(i.$div).find(s[0])[0]).prepend(t.html):e(e(i.$div).find(s[0])[0]).append(e("<br />")).append(e("<br />")).append(t.html),i.$div.isotope("reLayout")})}"modern"==this.settings.skin&&e(i.$dpSocialTimelineContent).append(e("<div>").addClass("dpSocialTimelineText").html(r)),"undefined"==typeof r&&(r=""),r=r.replace(/[\ud800-\udfff]/g,"");var p=jQuery("<a />").addClass("share_twitter").attr({href:"http://twitter.com/share?original_referer="+this.entry[x].link+"&text="+encodeURIComponent(this._strip_tags(r).length>110?this._strip_tags(r).substr(0,110)+"... - ":this._strip_tags(r)),title:"Share in Twitter"}).click(function(){var e=575,i=400,t=(jQuery(window).width()-e)/2,s=(jQuery(window).height()-i)/2,a=this.href,n="status=1,width="+e+",height="+i+",top="+s+",left="+t;return window.open(a,"twitter",n),!1}),u=jQuery("<a />").addClass("share_facebook").attr({href:"http://www.facebook.com/share.php?u="+this.entry[x].link,title:"Share in Facebook"}).click(function(){var e=575,i=400,t=(jQuery(window).width()-e)/2,s=(jQuery(window).height()-i)/2,a=this.href,n="status=1,width="+e+",height="+i+",top="+s+",left="+t;return window.open(a,"facebook",n),!1});$stContentHead=e("<div />").addClass("dpSocialTimelineContentHead").append(e($favicon)).append(e("<span />").addClass("user").append(e("<strong/>").html(n).text())).append(e($permalink)).append(e("<div />").css("clear","both")),$stContentFoot=e("<div />").addClass("dpSocialTimelineContentFoot").append(e($time)).append(this.settings.share?e(p):"").append(this.settings.share?e(u):""),i.$dpSocialTimelineContent.append(e("<div />").css("clear","both")),$li=e("<div>").addClass((s?"dpSocialTimeline_hideMe ":"")+"dpSocialTimeline_item").addClass(this.entry[x].name).append(e($stContentHead)).append(e(i.$dpSocialTimelineContent)).append(e($stContentFoot)).attr({"data-timeline-time":new Date(this.entry[x].publishedDate).getTime()}),e(i.$div).append($li)}},_onLoadHook:function(i){var t=this;e(t.timeline).append(e(i.$div).hide()),e("img",t.timeline).dpSocialTimeline_batchImageLoad({loadingCompleteCallback:function(){i.showDivider&&e(t.timeline).prepend(e("<div />").addClass("dpSocialTimeline_divider")),i.appendLayout&&e(t.timeline).prepend(i.$dpSocialTimelineLayout),i.appendFilter&&e(t.timeline).prepend(i.$dpSocialTimelineFilter),e(i.$div).show(),e(t.timeline).removeClass("dpSocialTimelineLoading"),"spineAlign"==t.settings.layoutMode&&e(i.$dpSocialTimelineLineWrap).show(),e(i.$div).isotope({itemSelector:".dpSocialTimeline_item",layoutMode:t.settings.layoutMode,itemPositionDataEnabled:!0,getSortData:{time:function(i){return e(i).attr("data-timeline-time")}},sortBy:"time",sortAscending:!1,spineAlign:{gutterWidth:20},transformsEnabled:t.settings.rtl?!1:!0,onLayout:function(t,s){e(i.$dpSocialTimelineLayout).find("button[data-style='"+s.options.layoutMode+"']").addClass("active"),e("span",i.$dpSocialTimelineLine).fadeOut("fast",function(){e(this).remove()}),t.each(function(){var t=e("<span />");i.$dpSocialTimelineLine.append(t.css({top:e(this).data("isotope-item-position").y+18}))})}}),e(i.$div).isotope({filter:".dpSocialTimeline_item:lt("+t.settings.total+")"}),e(".dpSocialTimeline_item:gt("+(t.settings.total-1)+")",i.$div).css({opacity:0,scale:.001}),e(".dpSocialTimeline_item",i.$div).width(t.settings.itemWidth),(t.settings.addColorbox||t.settings.addLightbox)&&(e(i.$div).find(".addColorbox:not(.youtube)").magnificPopup({type:"image"}),e(i.$div).find(".addColorbox.youtube").magnificPopup({type:"iframe"})),t._updateTimelineSize()}})},_parseRSS:function(i,t,s,a,n){if(null==i)return!1;var l=this.prefix+"ajax.googleapis.com/ajax/services/feed/load?v=1.0&output=json_xml&callback=?&q="+encodeURIComponent(i);null!=t&&t>0&&"undefined"!=typeof t?l+="&num="+t:e.isArray(t)?l+="&num="+t[s]:null!=n&&(l+="&num="+n),(-1!==i.indexOf("user_timeline.php")||-1!==i.indexOf("search.php")||-1!==i.indexOf("instagram.php")||-1!==i.indexOf("instagram_hash.php")||-1!==i.indexOf("foursquare.php")||-1!==i.indexOf("facebook_page.php")||-1!==i.indexOf("youtube.php"))&&(l=i,null!=t&&t>0&&"undefined"!=typeof t?l+="&count="+t:null!=n&&(l+="&count="+n)),e.getJSON(l,function(e){if("function"!=typeof a)return!1;try{e.responseData.feed}catch(i){return console.log("Feed: "+l+" could not be loaded"),a.call(this,!1,s),!1}a.call(this,e.responseData,s)})},preg_quote:function(e){return(e+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")},_relativeTime:function(e){var i=e,t=arguments.length>1?arguments[1]:new Date,s=parseInt((Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes())-i)/1e3),a="";return a=60>s?"less than minute ago":120>s?"about a minute ago":3600>s?"about "+parseInt(s/60).toString()+" minutes ago":7200>s?"about an hour ago":86400>s?"about "+parseInt(s/3600).toString()+" hours ago":172800>s?"1 day ago":parseInt(s/86400).toString()+" days ago"},_getImage:function(i,t){var s,a=new Array,n=/<img .*?src=["\']([^ ^"^\']*)["\']/gi,l="",o=i.content,r=i.title;if(""!=i.thumbnail&&"undefined"!=typeof i.thumbnail)a[0]=i.thumbnail;else for(;s=n.exec(o);)a.push(s[1]);if("undefined"==typeof a[0]||null==a[0])return!1;if(a.length>0&&-1===a[0].indexOf("sndcdn.com")){var d=a[0];if(-1!==d.indexOf("instagram.com/profiles")&&(d=a[1]),d=d.replace("_m.jpg",".jpg"),-1==d.indexOf("fbcdn"))d=d.replace("_b.jpg","_f.jpg"),d=d.replace("_b.png","_f.png");else if(-1==d.indexOf("safe_image.php")){var h=d.split("_");object_id=h[1],d="http://graph.facebook.com/"+object_id+"/picture?type=normal"}if(d=d.replace("_s.jpg","_b.jpg"),d=d.replace("_m.png",".png"),d=d.replace("_s.png","_b.png"),d=d.replace("236x/","736x/"),d=d.replace(/\&/g,"&"),-1!=d.indexOf("safe_image.php")&&(d=unescape(d.match(/url=([^&]+)/)[1])),-1!=d.indexOf("app_full_proxy.php")&&(d=unescape(d.match(/src=([^&]+)/)[1])),l=(""!=this.settings.itemWidth?this.settings.itemWidth:200)-40,"https://"==this.prefix){var m=d.replace("http://","https://");d=m}return t?d:e("<img />").attr({src:d,alt:r}).addClass("item_thumb").css({width:"98%"})}return!1},_checkImage:function(e){var i=new Image;i.onload=function(){return!0},i.onerror=function(){return!1},i.src=e},_getYoutubeVideo:function(e){return e.replace(/https:\/\/(www.)?(youtu.be\/|youtube.com\/watch\?v=)([a-zA-Z0-9?%.;:\\/=+_-]+)([&]*([a-zA-Z0-9?&%.;:\\/=+_-]*))/i,"http://www.youtube.com/v/$3?fs=1&hl=en_US")},_getYoutubeId:function(e){var i=/.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/,t=e.match(i);return t&&11==t[1].length?t[1]:!1},_getVimeoVideo:function(e){return e.replace(/http:\/\/(www.)?(vimeo.com\/)([a-zA-Z0-9?%.;:\\/=+_-]+)([&]*([a-zA-Z0-9?&%.;:\\/=+_-]*))/i,"http://player.vimeo.com/video/$3")
},_linkify:function(e){return e?e.replace(/(\b((https?|ftp|file):\/\/|(www.))[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,function(e){return-1===e.indexOf("://")&&(e="http://"+e),'<a href="'+e+'" target="_blank">'+e+"</a>"}):void 0}},e.fn.dpSocialTimeline=function(t){var s;return this.each(function(){s=new i(e(this),t),e(this).data("dpSocialTimeline",s)}),this},e.fn.dpSocialTimeline.defaults={feeds:null,layoutMode:"timeline",addColorbox:!1,addLightbox:!1,showSocialIcons:!0,showFilter:!0,allowMultipleFilters:!0,showLayout:!0,showLayoutTimeline:!0,showLayoutColumns:!0,rtl:!1,cache:!1,cacheTime:900,showLayoutOneColumn:!0,itemWidth:200,share:!0,timelineItemWidth:"",columnsItemWidth:"",oneColumnItemWidth:"",skin:"light",total:10},e.fn.dpSocialTimeline.settings={},e.fn.dpSocialTimeline_batchImageLoad=function(i){var t=e(this),s=t.size(),a=s,n=0;e.fn.dpSocialTimeline_batchImageLoad.defaults={loadingCompleteCallback:null,imageLoadedCallback:null};var l=e.extend({},e.fn.dpSocialTimeline_batchImageLoad.defaults,i);t.each(function(){e(this)[0].complete?(a--,l.imageLoadedCallback&&l.imageLoadedCallback(n,s)):(e(this).load(function(){n++,l.imageLoadedCallback&&l.imageLoadedCallback(n,s),n>=a&&l.loadingCompleteCallback&&l.loadingCompleteCallback()}),e(this).error(function(){n++,l.imageLoadedCallback&&l.imageLoadedCallback(n,s),n>=a&&l.loadingCompleteCallback&&l.loadingCompleteCallback()}))}),0>=a&&l.loadingCompleteCallback&&l.loadingCompleteCallback()};try{e.Isotope.prototype._spineAlignReset=function(){this.spineAlign={colA:0,colB:10}},e.Isotope.prototype._spineAlignLayout=function(i){var t=this,s=this.spineAlign,a=Math.round(this.options.spineAlign&&this.options.spineAlign.gutterWidth)||0,n=Math.round(this.element.width()/2);i.each(function(){var i=e(this),l=s.colB>s.colA,o=l?n-(i.outerWidth(!0)+a/2):n+a/2,r=l?s.colA:s.colB;t._pushPosition(i,o,r),l?i.removeClass("colB").addClass("colA"):i.removeClass("colA").addClass("colB"),s[l?"colA":"colB"]+=i.outerHeight(!0)})},e.Isotope.prototype._spineAlignGetContainerSize=function(){var e={};return e.height=this.spineAlign[this.spineAlign.colB>this.spineAlign.colA?"colB":"colA"],e},e.Isotope.prototype._spineAlignResizeChanged=function(){return!0},e.Isotope.prototype._positionAbs=function(e,i){return{right:e,top:i}}}catch(t){}}(jQuery);